<html>

    <head>
        <title>CodePlayer</title>

        <script type="text/javascript" src="jquery-ui-1.12.1/external/jquery/jquery.js"></script>

        <style type="text/css">

            body {
                font-family: sans-serif;
                font-size: 18px;
                padding: 0;
                margin: 0 5 0 0;
            }

            #topbar {
                width: 100%;
                height: 35px;
                background-color: #EEEEEE;
                padding: 2px;
            }

            #logo {
                float: left;
                font-weight: bold;
                font-size: 120%;
                padding: 3px 3px;
            }

            #optionBar {
                width: 255px;
                margin: 0 auto;
            }

            .toggleButton {
                float: left;
                font-size: 90%;
                padding: 6px;
                border: 1px solid #D8D8DE;
                border-right: none;
            }

            #html {
                border-top-left-radius: 4px;
                border-bottom-left-radius: 4px;
            }

            #output {
                border-top-right-radius: 4px;
                border-bottom-right-radius: 4px;
                border-right: 1px solid #D8D8DE;
            }

            .active {
                background-color: #E8F2FF;
            }

            .highlighted {
                background-color: #D5D5D5;
            }

            textarea {
                resize: none;
            }

            iframe {
                border: none;
            }

            .panel {
                margin-left: 5px;
                float: left;
            }

            .hidden {
                display: none;
            }

        </style>

    </head>



    <body>

        <div id="topbar">
            <div id="logo">
                CodePlayer
            </div>

            <div id="optionBar">

                <div class="toggleButton active" id="html">
                    HTML
                </div>
                <div class="toggleButton" id="css">
                    CSS
                </div>
                <div class="toggleButton" id="javascript">
                    JavaScript
                </div>
                <div class="toggleButton active" id="output">
                    Output
                </div>
            </div>
        </div>

        <div id="bodyContainer">
            <textArea id="htmlPanel" class="panel">Hello World!</textArea>
            <textArea id="cssPanel" class="panel hidden">p { color: green }</textArea>
            <textArea id="javascriptPanel" class="panel hidden">alert("Sup");</textArea>
            <iframe id="outputPanel" class="panel"></iframe>
        </div>

    </body>

    <script type="text/javascript">

        function updateOutput() {
            $("iframe").contents().find("html").html("<html><head><style type='text/css'>" + $("#cssPanel").val() + "</style></head><body>" + $("#htmlPanel").val() + "</body>");
            document.getElementById("outputPanel").contentWindow.eval($("#javascriptPanel").val());
        }

        $(".toggleButton").hover(function() {
            $(this).addClass("highlighted");
        }, function() {
            $(this).removeClass("highlighted");
        });

        $(".toggleButton").click(function() {
            $(this).toggleClass("active");
            $(this).removeClass("highlighted");

            var panelId = $(this).attr("id") + "Panel";
            $("#" + panelId).toggleClass("hidden");

            var activePanels = $(".active").length;
            $(".panel").width(($(window).width() / activePanels) - 15);
        })


        updateOutput();

        $("textarea").on("change keyup paste", function() {
            updateOutput();
        })

        $(".panel").height($(window).height() - $("#topBar").height() - 50);
        $(".panel").width(($(window).width() / 2) - 15);


    </script>

</html>
